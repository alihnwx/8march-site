<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–° 8 –ú–∞—Ä—Ç–∞ üíê</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="page">
  <header class="top-greeting">
    <div class="top-greeting__label">8 –º–∞—Ä—Ç–∞</div>
    <h1 id="top-title" class="top-greeting__title">–° 8 –ú–∞—Ä—Ç–∞ üíê</h1>
    <p class="top-greeting__subtitle">–ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –±—É–¥–µ—Ç —Ç—ë–ø–ª—ã–º, —è—Ä–∫–∏–º –∏ –æ—Å–æ–±–µ–Ω–Ω—ã–º ‚Äî –∏–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–±—è.</p>
  </header>

  <main class="card">
    <div class="card__photo-wrapper">
      <img id="photo" class="card__photo" src="" alt="">
    </div>
    <h2 id="name" class="card__name"></h2>
    <p id="text" class="card__message"></p>
  </main>
</div>

<script>
const textElement = document.getElementById("text");

/* –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö */
fetch("data.json")
  .then(res => res.json())
  .then(data => {
    const params = new URLSearchParams(window.location.search);
    const key = params.get("name");

    if (data[key]) {
      const girlName = data[key].name;
      document.getElementById("top-title").innerText = "–° 8 –ú–∞—Ä—Ç–∞, " + girlName + " üíê";
      document.getElementById("name").innerText = girlName;
      document.getElementById("photo").src = data[key].photo;
      typeWriter(data[key].text, textElement);
    } else {
      textElement.innerText = "–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞ üíñ";
    }
  });

/* –≠—Ñ—Ñ–µ–∫—Ç –ø–µ—á–∞—Ç–∞–Ω–∏—è */
function typeWriter(text, element) {
  element.innerHTML = "";
  let i = 0;
  function typing() {
    if (i < text.length) {
      element.innerHTML += text.charAt(i);
      i++;
      setTimeout(typing, 30);
    }
  }
  typing();
}

/* –õ–µ–ø–µ—Å—Ç–∫–∏ –∏ —Ü–≤–µ—Ç–æ—á–∫–∏ */
for (let i = 0; i < 25; i++) {
  let petal = document.createElement("div");
  petal.classList.add("petal");
  petal.style.left = Math.random() * 100 + "vw";
  petal.style.animationDuration = 3 + Math.random() * 5 + "s";
  petal.style.opacity = Math.random();
  document.body.appendChild(petal);
}

for (let i = 0; i < 15; i++) {
  let flower = document.createElement("div");
  flower.classList.add("flower");
  flower.style.left = Math.random() * 100 + "vw";
  flower.style.animationDuration = 4 + Math.random() * 6 + "s";
  flower.style.opacity = Math.random() * 0.8 + 0.2;
  document.body.appendChild(flower);
}
</script>

</body>
</html>